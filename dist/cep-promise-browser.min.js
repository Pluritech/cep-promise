!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.cep=r()}(this,function(){"use strict";function e(e){var s="https://viacep.com.br/ws/"+e+"/json/",i={method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8"}};return S(s,i).then(r).then(t).then(o).catch(n)}function r(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço ViaCEP.")}function t(e){if(e.erro===!0)throw new Error("CEP não encontrado na base do ViaCEP.");return e}function o(e){return{cep:e.cep.replace("-",""),state:e.uf,city:e.localidade,neighborhood:e.bairro,street:e.logradouro}}function n(e){var r=new x({message:e.message,service:"viacep"});throw"FetchError"===e.name&&(r.message="Erro ao se conectar com o serviço ViaCEP."),r}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=r+"https://api.postmon.com.br/v1/cep/"+e,o={method:"GET",mode:"cors"};return S(t,o).then(i).then(a).then(c).catch(u)}function i(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço do Postmon.")}function a(e){if(!Object.keys(e).length)throw new Error("CEP não encontrado na base do Postmon.");return e}function c(e){return{cep:e.cep,state:e.estado,city:e.cidade,neighborhood:e.bairro,street:e.logradouro}}function u(e){var r=new x({message:e.message,service:"postmon"});throw"FetchError"===e.name&&(r.message="Erro ao se conectar com o serviço do Postmon."),r}function f(e){return Promise.resolve(e).then(p).then(h).then(l).then(m).then(d).catch(y).catch(v)}function p(e){var r="undefined"==typeof e?"undefined":g(e);if("number"===r||"string"===r)return e;throw new _({message:"Erro ao inicializar a instância do CepPromise.",type:"validation_error",errors:[{message:"Você deve chamar o construtor utilizando uma String ou um Number.",service:"cep_validation"}]})}function h(e){return e.toString().replace(/\D+/g,"")}function m(e){return"0".repeat(L-e.length)+e}function l(e){if(e.length<=L)return e;throw new _({message:"CEP deve conter exatamente "+L+" caracteres.",type:"validation_error",errors:[{message:"CEP informado possui mais do que "+L+" caracteres.",service:"cep_validation"}]})}function d(e){return Promise.any([k(e),T(e)])}function y(e){if(void 0!==e.length)throw new _({message:"Todos os serviços de CEP retornaram erro.",type:"service_error",errors:e});throw e}function v(e){var r=e.message,t=e.type,o=e.errors;throw new _({message:r,type:t,errors:o})}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},b=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},E=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},P=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},_=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,o=e.type,n=e.errors;w(this,r);var s=E(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return s.name="CepPromiseError",s.message=t,s.type=o,s.errors=n,s}return b(r,e),r}(Error),C="function"==typeof fetch?fetch.bind():function(e,r){return r=r||{},new Promise(function(t,o){function n(){var e,r=[],t=[],o={};return s.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(n,s,i){r.push(s=s.toLowerCase()),t.push([s,i]),e=o[s],o[s]=e?e+","+i:i}),{ok:1==(s.status/200|0),status:s.status,statusText:s.statusText,url:s.responseURL,clone:n,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},headers:{keys:function(){return r},entries:function(){return t},get:function(e){return o[e.toLowerCase()]},has:function(e){return e.toLowerCase()in o}}}}var s=new XMLHttpRequest;s.open(r.method||"get",e);for(var i in r.headers)s.setRequestHeader(i,r.headers[i]);s.withCredentials="include"==r.credentials,s.onload=function(){t(n())},s.onerror=o,s.send(r.body)})},j=Object.freeze({default:C}),O=j&&C||j,S=window.fetch||(window.fetch=O.default||O),x=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,o=e.service;w(this,r);var n=E(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.name="ServiceError",n.message=t,n.service=o,n}return b(r,e),r}(Error),T=e,k=s,A=function(e){return new Promise(function(r,t){return Promise.resolve(e).then(t,r)})};Promise.any=function(e){return A(Promise.all([].concat(P(e)).map(A)))};var L=8;return f});